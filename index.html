<html>
    <head>
        <style>
            #mapid { height: 100%; border:0;padding: 0; }
        </style>


    </head>
    <!--https://leafletjs.com/examples/wms/wms.html
    http://wms-map.sourceforge.net/
    https://leafletjs.com/reference-1.6.0.html#latlngbounds>-->
    <body>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
        crossorigin=""></script>
        <div id="mapid"></div>
        <script>
            function getNcdf(urlpath,cb){
                var xhr = new XMLHttpRequest();
                xhr.open('GET', urlpath, true);
                xhr.onreadystatechange = function() {
                    if (this.readyState == XMLHttpRequest.DONE) {
                        cb(xhr.responseText);
                    }
                };
                xhr.send(); //start process
            }
            getNcdf('192.168.68.111:5001/netcdf/medicion.nc',(resp)=>{
                var reader=JSON.parse(resp)
                console.log(reader); // go to offset and read it
            })
            getNcdf('192.168.68.111:5001/netcdf/medicion.nc/uo',(resp)=>{
                var content=JSON.parse(resp)
                console.log(content); // go to offset and read it
            })
            

            


            var mymap = L.map('mapid',{renderer:L.canvas()})
            mymap.setView([38.020, 24.020], 15);

            /*mymap.fitBounds([
                [40.712, -74.227],
                [40.774, -74.125]
            ]);*/

            /*var wmsLayer = L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
                layers: 'TOPO-OSM-WMS'
            }).addTo(mymap);*/
            /*var wmsLayer = L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
                layers: 'SRTM30-Colored-Hillshade'
            }).addTo(mymap);
            */

            
            var basemaps = {
                Places: L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
                    layers: 'OSM-Overlay-WMS'
                }),

                Topography: L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
                    layers: 'TOPO-WMS'
                }),

                'Topography, then places': L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
                    layers: 'TOPO-WMS,OSM-Overlay-WMS'
                }),

                'Places, then topography': L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
                    layers: 'OSM-Overlay-WMS,TOPO-WMS'
                }),
                'OSM topography':L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
                    maxZoom: 18
                })
            };

            L.control.layers(basemaps).addTo(mymap);

            basemaps['OSM topography'].addTo(mymap);
        </script>
    </body>
</html>

